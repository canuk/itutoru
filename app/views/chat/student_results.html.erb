<h1><i class="fa-regular fa-square-poll-vertical"></i> Student Results - <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
alt="avatar 1" style="width: 45px; height: 100%;"> Clara Logan</h1>


<div class="table-responsive">
<table class="table table-striped table-sm">
  <thead>
    <tr>
      <th scope="col">Subject Matter</th>
      <th scope="col">Concept</th>
      <th scope="col">"I knew this!"</th>
      <th scope="col">"Dig Deeper"</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Water Cycle</td>
      <td>Evaporation - Description</td>
      <td><span class="badge rounded-pill text-bg-success">1</span></td>
      <td><span class="badge rounded-pill text-bg-secondary">0</span></td>
    </tr>
    <tr>
      <td>Water Cycle</td>
      <td>Condensation - Cloud Formation</td>
      <td><span class="badge rounded-pill text-bg-success">1</span></td>
      <td><span class="badge rounded-pill text-bg-primary">1</span></td>
    </tr>       
  </tbody>
</table>
</div>
<hr/>
<h2>Chat Transcript</h2>
<section class="gradient-custom rounded">
  <div class="pt-3 pe-3" data-mdb-perfect-scrollbar="true" style="position: relative;">
  <% @chat_history.each do |chat_item| %>
    <% if chat_item.response_type == "robot" %>
      <div class="d-flex flex-row justify-content-end py-2">
        <div>
          <p class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary shadow-sm"><%= chat_item.chat_text %></p>
        </div>
        <%= image_tag "tutor_avatar.png", alt: 'tutor_robot', style: 'width: 45px; height: 100%;' %>
      </div>
      <% unless chat_item.student_response.blank? %>
      <div class="d-flex flex-row justify-content-start">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
          alt="avatar 1" style="width: 45px; height: 100%;">
        <div>
          
            <% if chat_item.student_response == "i_knew_this" %>
            <p class="small p-2 ms-3 mb-1 rounded-3 shadow-sm bg-success text-light" style="background-color: #f5f6f7;">
            <i class="fa-solid fa-comment-check"></i> I knew this!
            <% elsif chat_item.student_response == "dig_deeper" %>
            <p class="small p-2 ms-3 mb-1 rounded-3 shadow-sm bg-info" style="background-color: #f5f6f7;">
            <i class="fa-solid fa-thought-bubble"></i> Let's dig deeper into this concept...
            <% end %>
          </p>
        </div>
      </div>
      <% end %>
    <% elsif chat_item.response_type == "student" %>
      <div class="d-flex flex-row justify-content-start">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
          alt="avatar 1" style="width: 45px; height: 100%;">
        <div>
          <p class="small p-2 ms-3 mb-1 rounded-3 shadow-sm" style="background-color: #f5f6f7;">
            <%= chat_item.chat_text %>
          </p>
        </div>
      </div>
    <% end %>
  <% end %>
  </div>
</section>  